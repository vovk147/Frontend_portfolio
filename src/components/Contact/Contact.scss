$mtm-crimson: #8b0000;
$mtm-light: #b30000;

$glass-bg: linear-gradient(135deg, rgba(20, 20, 20, 0.4) 0%, rgba(5, 5, 5, 0.6) 100%);
$glass-border: rgba(255, 255, 255, 0.08);
$glass-inner-glow: inset 0 2px 3px rgba(255, 255, 255, 0.1), inset 0 -5px 20px rgba(0,0,0,0.5);

.contact-glass {
  position: relative; 
  padding: 120px 0; 
  z-index: 10;
  background: transparent !important;
  overflow: visible !important;

  @media (max-width: 768px) { padding: 80px 0; }

  &__header {
    display: flex; align-items: center; gap: 20px; margin-bottom: 60px;
    .section-title {
      display: flex; flex-wrap: wrap; align-items: center; gap: 15px; row-gap: 5px;
      font-size: clamp(2rem, 4vw, 3rem); font-weight: 900; font-family: 'Inter', sans-serif;
      color: var(--text-primary); letter-spacing: -1px; line-height: 1.1; margin: 0;
      .accent-number { color: $mtm-light; font-family: var(--font-mono); font-style: italic; font-weight: 900; text-shadow: 0 0 15px rgba($mtm-crimson, 0.4); }
      .glow-text { color: transparent; -webkit-text-stroke: 1px var(--text-secondary); }
    }
    .header-line { flex: 1; height: 1px; background: linear-gradient(90deg, var(--border-color), transparent); min-width: 50px; }
  }

  .contact-grid {
    display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px;
    @media (max-width: 900px) { grid-template-columns: 1fr; }
  }

  /* === МАГИЯ ЕДИНОЙ ФОТОГРАФИИ ТВОЕГО ПК === */
  .split-bg-card {
    /* Накладываем темный градиент и ТВОЮ фотку сетапа */
    background-image: 
      linear-gradient(135deg, rgba(15, 15, 15, 0.85) 0%, rgba(5, 5, 5, 0.95) 100%),
      url('/photo_5253467588765882365_w.jpg');
    
    background-attachment: fixed;
    background-size: cover;
    background-position: center;

    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.12); border-radius: 12px;
    padding: 40px; position: relative; overflow: visible;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), inset 0 2px 3px rgba(255, 255, 255, 0.1);
    transition: all 0.4s ease;

    @media (max-width: 600px) { padding: 25px; }
    &:hover { border-color: rgba($mtm-crimson, 0.4); box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8), inset 0 0 20px rgba($mtm-crimson, 0.15); }
  }

  /* === ИНФО БЛОК === */
  .contact-info-card {
    display: flex; flex-direction: column;
    
    &::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: rgba($mtm-crimson, 0.6); border-top-left-radius: 12px; border-bottom-left-radius: 12px; }

    .info-title { font-family: 'Inter', sans-serif; font-size: 1.5rem; font-weight: 800; color: #fff; margin-bottom: 15px; }
    .info-desc { font-family: 'Inter', sans-serif; font-size: 0.95rem; color: #aaa; line-height: 1.6; margin-bottom: 40px; }

    .info-specs {
      display: flex; flex-direction: column; gap: 20px; margin-bottom: 40px; flex: 1;
      .spec-item {
        display: flex; align-items: flex-start; gap: 15px; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);
        .spec-icon { color: $mtm-light; font-size: 1.5rem; margin-top: 2px; &.pulse { color: #00ff00; animation: pulse 2s infinite; } }
        .spec-text {
          display: flex; flex-direction: column; gap: 5px;
          .label { font-family: var(--font-mono); font-size: 0.7rem; color: #666; font-weight: 700; letter-spacing: 0.5px; }
          .value { font-family: var(--font-mono); font-size: 0.9rem; color: #fff; font-weight: 600; &.text-green { color: #00ff00; font-size: 0.85rem; letter-spacing: 1px; } }
        }
      }
    }

    .social-links {
      display: flex; gap: 15px;
      .social-btn {
        position: relative;
        display: flex; align-items: center; justify-content: center; width: 45px; height: 45px; border-radius: 8px;
        background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #aaa; transition: 0.3s;
        
        &::after {
          content: attr(data-tooltip);
          position: absolute; bottom: 125%; left: 50%;
          transform: translateX(-50%) translateY(10px);
          background: $mtm-crimson; border: 1px solid rgba(255,255,255,0.2); color: #fff;
          padding: 6px 12px; border-radius: 6px; font-family: var(--font-mono); font-size: 0.7rem; font-weight: 700;
          white-space: nowrap; opacity: 0; visibility: hidden; transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
          box-shadow: 0 5px 15px rgba(0,0,0,0.5); pointer-events: none; z-index: 20;
        }
        &::before {
          content: ''; position: absolute; bottom: 125%; left: 50%;
          transform: translateX(-50%) translateY(15px);
          border-width: 5px; border-style: solid; border-color: $mtm-crimson transparent transparent transparent;
          opacity: 0; visibility: hidden; transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1); pointer-events: none; z-index: 20;
        }

        &:hover { background: rgba($mtm-crimson, 0.8); border-color: $mtm-light; color: #fff; box-shadow: 0 5px 15px rgba($mtm-crimson, 0.4); }
        &:hover::after, &:hover::before { opacity: 1; visibility: visible; }
        &:hover::after { transform: translateX(-50%) translateY(0); }
        &:hover::before { transform: translateX(-50%) translateY(5px); }
      }
    }
  }

  /* === ФОРМА СВЯЗИ === */
  .contact-form-card {
    .rs-form {
      display: flex; flex-direction: column; gap: 24px;
      .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; @media (max-width: 600px) { grid-template-columns: 1fr; } }

      .form-group {
        display: flex; flex-direction: column; gap: 8px;
        label { font-family: var(--font-mono); font-size: 0.75rem; color: #aaa; font-weight: 700; letter-spacing: 0.5px; }
        
        input, textarea {
          width: 100%; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px;
          padding: 16px 20px; color: #fff; font-family: 'Inter', sans-serif; font-size: 0.95rem; outline: none; transition: all 0.3s;
          &::placeholder { color: #555; }
          &:focus { border-color: $mtm-crimson; background: rgba(10, 10, 10, 0.9); box-shadow: 0 0 0 4px rgba($mtm-crimson, 0.15); }
          &.error-border { border-color: #ff3333; box-shadow: 0 0 0 4px rgba(255, 51, 51, 0.15); }
        }
        
        textarea { 
          resize: vertical; min-height: 140px; line-height: 1.6; 
          &::-webkit-scrollbar { width: 6px; }
          &::-webkit-scrollbar-track { background: transparent; }
          &::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
          &:focus::-webkit-scrollbar-thumb { background: rgba($mtm-crimson, 0.5); }
        }
        .error-text { font-family: 'Inter', sans-serif; font-size: 0.8rem; color: #ff3333; margin-top: 4px; }
      }

      .global-error { display: flex; align-items: center; gap: 10px; background: rgba(255, 51, 51, 0.1); border: 1px solid rgba(255, 51, 51, 0.3); color: #ff3333; padding: 14px; border-radius: 8px; font-family: 'Inter', sans-serif; font-size: 0.9rem; font-weight: 500; }

      .submit-btn {
        display: flex; align-items: center; justify-content: center; margin-top: 10px;
        background: rgba(25, 25, 25, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); color: #fff;
        padding: 18px 30px; border-radius: 8px; font-family: var(--font-mono); font-size: 0.95rem; font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: 0.3s;
        
        .btn-content { display: flex; align-items: center; gap: 10px; }
        &:hover:not(:disabled) { background: rgba($mtm-crimson, 0.9); border-color: $mtm-light; box-shadow: 0 8px 25px rgba($mtm-crimson, 0.4); transform: translateY(-2px); }
        &:disabled { opacity: 0.7; cursor: not-allowed; }
        &.loading { background: rgba(10, 10, 10, 0.9); border-color: $mtm-crimson; color: $mtm-crimson; }
        .spin-icon { animation: spin 1s linear infinite; }
      }
    }

    .success-state {
      display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; min-height: 400px; text-align: center; gap: 20px;
      .success-icon { color: #00ff00; filter: drop-shadow(0 0 20px rgba(0, 255, 0, 0.5)); margin-bottom: 10px; }
      h3 { font-family: var(--font-mono); font-size: 1.8rem; color: #fff; letter-spacing: 1px; margin: 0; }
      p { font-family: 'Inter', sans-serif; color: #aaa; font-size: 1.05rem; line-height: 1.5; }
    }
  }
}

@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
@keyframes spin { 100% { transform: rotate(360deg); } }

/* === СВЕТЛАЯ ТЕМА === */
[data-theme='light'] .contact-glass {
  .section-title { color: #111; .glow-text { -webkit-text-stroke: 1px rgba(0,0,0,0.3); } }
  
  .split-bg-card {
    background-image: 
      linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(245, 245, 245, 0.95) 100%),
      url('/photo_5253467588765882365_w.jpg');
    border-color: rgba(0, 0, 0, 0.1); 
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.05); 
    &:hover { border-color: rgba($mtm-crimson, 0.4); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
  }

  .contact-info-card {
    &::before { background: $mtm-crimson; }
    .info-title { color: #111; } .info-desc { color: #555; }
    
    .info-specs .spec-item { 
      background: rgba(255,255,255,0.6); border-color: rgba(0,0,0,0.05); 
      .spec-text { .label { color: #888; } .value { color: #222; &.text-green { color: #009900; } } }
    }
    
    .social-links .social-btn { 
      background: rgba(255,255,255,0.6); border-color: rgba(0,0,0,0.1); color: #555; 
      &:hover { background: $mtm-crimson; color: #fff; border-color: $mtm-crimson; } 
      &::after { background: #fff; color: #111; border-color: rgba(0,0,0,0.1); }
      &::before { border-color: #fff transparent transparent transparent; }
    }
  }

  .contact-form-card .rs-form {
    .form-group {
      label { color: #555; }
      input, textarea { 
        background: rgba(255,255,255,0.8); border: 1px solid rgba(0, 0, 0, 0.15); color: #111; 
        &::placeholder { color: #888; }
        &:focus { border-color: $mtm-crimson; background: #fff; box-shadow: 0 0 0 4px rgba($mtm-crimson, 0.1); }
      }
    }
    
    .submit-btn { 
      background: #111; border-color: transparent; color: #fff; 
      &:hover:not(:disabled) { background: $mtm-crimson; border-color: $mtm-crimson; box-shadow: 0 8px 25px rgba($mtm-crimson, 0.25); } 
      &.loading { background: #f0f0f0; border-color: #ddd; color: #888; }
    }
  }
}